webpackJsonp([2,0],[function(t,e,n){(function(t){"use strict";function e(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(95),a=r(o),i=n(24),s=r(i),c=n(151),u=r(c),l=n(83),d=r(l),h=n(79),f=r(h),_=n(171),m=n(78),p=e(m);(0,_.sync)(d["default"],f["default"]),(0,a["default"])(p).forEach(function(t){s["default"].filter(t,p[t])}),t.vue=new s["default"]({router:f["default"],store:d["default"],el:"#app",render:function(t){return t(u["default"])}})}).call(e,function(){return this}())},,,,,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){var e=new FormData;for(var n in t)t.hasOwnProperty(n)&&e.append(n,t[n]);return e}function a(t){return W.post("/users/register",o(t))}function i(t){var e=t.username,n=t.password,r={username:e,password:n};return W.post("/users/login",o(r))}function s(){return W.post("/users/logout")}function c(){return W.get("/users/self/")}function u(t){return W.post("/books/self/",o(t))}function l(t){return W.get("/books/search",{params:t})}function d(t){return W.get("/books/"+t+"/")}function h(t){return W.get("/books/"+t+"/traces/",{params:{page:1,limits:0}})}function f(t){return W.post("/books/"+t+"/borrow")}function _(t){return W.post("/books/"+t+"/return")}function m(t){return W.post("/users/self/loen/"+t.id+"/renew")}function p(t){return W.post("/users/self/loen/"+t.id+"/cancel")}function b(t){return W.post("/users/self/loen/"+t.id+"/cancelReservation")}function v(){return W.get("/users/self/loen/",{params:{page:1,limits:0}})}function g(t){return W.post("/books/"+t.book.isbn+"/traces/"+t.id+"/lend")}function w(t){return W.post("/books/"+t.book.isbn+"/traces/"+t.id+"/reserve")}function k(){return W.get("/admin/users/",{params:{page:1,limits:0}})}function B(t){return W.get("/admin/users/"+t+"/")}function y(t){return W.post("/admin/users/"+t+"/freeze")}function C(t){return W.post("/admin/users/"+t+"/unfreeze")}function A(t){return W.post("/admin/users/"+t+"//delete")}function O(t){return W.post("/admin/books/add",o(t))}function R(t,e){return W.post("/admin/books/"+t.isbn+"/update",o(e))}function T(t){return W.post("/admin/books/"+t.isbn+"/delete")}function D(){return W.get("/admin/books/",{params:{page:1,limits:0}})}function E(t){return W.get("/admin/books/"+t+"/")}function I(t){return W.post("/admin/books/"+t.isbn+"/traces/add",o(t))}function M(t,e){return W.post("/admin/books/"+t.isbn+"/traces/"+t.id+"/update",o(e))}function N(t){return W.post("admin/books/"+t.isbn+"/traces/"+t.id+"/delete")}function x(t){return W.get("/admin/books/"+t.isbn+"/traces/",{params:{page:1,limits:0}})}function S(t,e){return W.get("/admin/books/"+t+"/traces/"+e+"/")}function P(){return W.get("/admin/loen/")}function L(t){return W.post("/admin/loen/"+t.id+"/accept")}function F(t){return W.post("/admin/loen/"+t.id+"/reject")}function j(t){return W.post("/admin/loen/"+t.id+"/confirmReturned")}function U(t){return W.post("/admin/loen/"+t.id+"/confirmDisabled")}function $(t){return W.get("/douban/"+t+"/")}function K(t){return W.post("/admin/books/"+t.isbn+"/traces/"+t.traceId+"/lending",o({username:t.username}))}function q(t){return W.post("/admin/books/"+t.isbn+"/traces/"+t.traceId+"/returned")}Object.defineProperty(e,"__esModule",{value:!0}),e.register=a,e.login=i,e.logout=s,e.getProfile=c,e.setProfile=u,e.searchBook=l,e.getBook=d,e.getBookTraces=h,e.borrowBook=f,e.returnBook=_,e.renewBorrow=m,e.cancelApplication=p,e.cancelReservation=b,e.getMyBorrows=v,e.borrowBookTrace=g,e.reserveBookTrace=w,e.getUsersByAdmin=k,e.getUserByAdmin=B,e.freezeUserByAdmin=y,e.unfreezeUserByAdmin=C,e.deleteUserByAdmin=A,e.addBookByAdmin=O,e.updateBookByAdmin=R,e.deleteBookByAdmin=T,e.getBooksByAdmin=D,e.getBookByAdmin=E,e.addBookTraceByAdmin=I,e.updateBookTraceByAdmin=M,e.deleteBookTraceByAdmin=N,e.getBookTracesByAdmin=x,e.getBookTraceByAdmin=S,e.getBorrowsByAdmin=P,e.acceptLendingByAdmin=L,e.rejectLendingByAdmin=F,e.confirmReturnedByAdmin=j,e.confirmDisabledByAdmin=U,e.fetchDouban=$,e.quickBorrowByAdmin=K,e.quickReturnByAdmin=q;var W,V=n(81),H=r(V),G=n(80),Y=r(G),Q=n(82),J=r(Q),z="production";switch(z){case"local":W=Y["default"];break;case"mock":W=H["default"];break;case"production":W=J["default"]}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var r,o;n(142),r=n(87);var a=n(162);o=r=r||{},"object"!=typeof r["default"]&&"function"!=typeof r["default"]||(o=r=r["default"]),"function"==typeof o&&(o=o.options),o.render=a.render,o.staticRenderFns=a.staticRenderFns,o._scopeId="data-v-2",t.exports=r},,,,,,,,,,,,,,,,,,,,,function(t,e){"use strict"},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(24),a=r(o),i=n(170),s=r(i),c=n(57),u=r(c),l=n(154),d=r(l),h=n(155),f=r(h),_=n(156),m=r(_),p=n(153),b=r(p),v=n(157),g=r(v),w=n(158),k=r(w),B=n(159),y=r(B);a["default"].use(s["default"]);var C=new s["default"]({mode:"history",scrollBehavior:function(){return{y:0}},routes:[{path:"/index",component:u["default"]},{path:"/user/login",component:d["default"]},{path:"/user/register",component:f["default"]},{path:"/user",component:m["default"]},{path:"/user/borrows",component:b["default"]},{path:"/admin/books",component:g["default"]},{path:"/admin/borrows",component:k["default"]},{path:"/admin/users",component:y["default"]},{path:"*",redirect:"/index"}]});e["default"]=C},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(){return"http://localhost:6001/"}Object.defineProperty(e,"__esModule",{value:!0}),e.serviceUrl=o;var a=n(17),i=r(a),s=i["default"].create({baseURL:o(),timeout:3e3,withCredentials:!0,headers:{"X-Custom-Header":"foobar"}});e["default"]=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(17),a=r(o),i=n(59),s=r(i),c=a["default"].create(),u=new s["default"](c);u.onPost("/users/login").reply(200,{success:!0,entity:{roles:["READER"],id:1,username:"cauchywei",name:"Wei Qin",avatarUrl:"233",age:"20",major:"CS",phone:"23333",email:"cauchywei@gmail.com",remarks:"hi"}}),u.onGet("/users/self/").reply(200,{role:"READER",id:1,username:"cauchywei",name:"Wei Qin",avatarUrl:"233",age:"20",major:"CS",phone:"23333",email:"cauchywei@gmail.com",remarks:"hi"}),e["default"]=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(){return"http://xupu.name:6001/"}Object.defineProperty(e,"__esModule",{value:!0}),e.serviceUrl=o;var a=n(17),i=r(a),s=i["default"].create({baseURL:o(),timeout:3e3,withCredentials:!0,headers:{"X-Custom-Header":"foobar"}});e["default"]=s},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(94),i=o(a),s=n(96),c=o(s),u=n(24),l=o(u),d=n(172),h=o(d),f=n(5),_=r(f);l["default"].use(h["default"]);var m=void 0;try{m=JSON.parse(localStorage.getItem("account"))}catch(p){localStorage.setItem("account",null),m=null}var b={getBook:function(t,e){if(t instanceof Array){for(var n in t){var r=t[n];if(r&&r.isbn===e)return{index:n,value:r}}return{index:-1,value:void 0}}},getBookTrace:function(t,e){if(t instanceof Array){for(var n in t){var r=t[n];if(r&&r.id===e)return{index:n,value:r}}return{index:null,value:void 0}}},getBorrow:function(t,e){if(t instanceof Array){for(var n in t){var r=t[n];if(r&&r.id===e)return{index:n,value:r}}return{index:null,value:void 0}}},DUMP:function(){}},v=new h["default"].Store({state:{account:m,books:[],borrows:[],admin_users:[],admin_books:[],admin_bookTraces:[],admin_borrows:[],DUMP:{}},actions:{LOGIN:function(t,e){var n=t.commit;t.dispatch,t.state;return n("SET_ACCOUNT",e),c["default"].resolve()},LOGOUT:function(t){var e=t.commit;t.dispatch,t.state;return e("DEL_ACCOUNT"),c["default"].resolve()},SEARCH_BOOKS:function(t,e){var n=t.commit,r=(t.dispatch,t.state,e.isbn),o=e.name;return _.searchBook({isbn:r,name:o}).then(function(t){t.data.success?n("SET_BOOKS",t.data.entities):(console.log(t.data.error),alert(t.data.error))})["catch"](function(t){alert(t)})},FETCH_BOOK_TRACES:function(t,e){var n=t.commit;t.dispatch,t.state;return _.getBookTraces(e.isbn).then(function(t){t.data.success?n("SET_BOOK_TRACES",{isbn:e.isbn,traces:t.data.entities}):(console.log(t.data.error),alert(t.data.error))})["catch"](function(t){alert(t)})},FETCH_BORROWS:function(t){var e=t.commit;t.dispatch,t.state;return _.getMyBorrows().then(function(t){t.data.success?e("SET_BORROWS",t.data.entities):(console.log(t.data.error),alert(t.data.error))})["catch"](function(t){alert(t)})},CANCEL_APPLICATION:function(t,e){var n=t.commit;t.dispatch,t.state;return _.cancelApplication(e).then(function(t){t.data.success?(n("SET_BORROW",t.data.entity),alert("cancel successfully.")):(console.log(t.data.error),alert(t.data.error))})["catch"](function(t){alert(t)})},CANCEL_RESERVATION:function(t,e){var n=t.commit;t.dispatch,t.state;return _.cancelReservation(e).then(function(t){t.data.success?(n("SET_BORROW",t.data.entity),alert("cancel successfully.")):(console.log(t.data.error),alert(t.data.error))})["catch"](function(t){alert(t)})},RENEW_BORROW:function(t,e){var n=t.commit;t.dispatch,t.state;return _.renewBorrow(e).then(function(t){t.data.success?(n("SET_BORROW",t.data.entity),alert("renew for 15 days, you can renew once only.")):(console.log(t.data.error),alert(t.data.error))})["catch"](function(t){alert(t)})},ADMIN_ADD_BOOK:function(t,e){var n=t.commit,r=(t.dispatch,t.state,t.getters);return!!r.isAdmin&&_.addBookByAdmin(e).then(function(t){t.data.success?(n("ADMIN_ADD_BOOK",t.data.entity),alert("add successfully.")):(console.log(t.data.error),alert(t.data.error))})["catch"](function(t){alert(t)})},ADMIN_DEL_BOOK:function(t,e){var n=t.commit,r=(t.dispatch,t.state,t.getters);return!!r.isAdmin&&_.deleteBookByAdmin(e).then(function(t){t.data.success?(n("ADMIN_DEL_BOOK",e),alert("delete successfully.")):(console.log(t.data.error),alert(t.data.error))})["catch"](function(t){alert(t)})},ADMIN_FETCH_USERS:function(t){var e=t.commit,n=(t.dispatch,t.state,t.getters);return!!n.isAdmin&&_.getUsersByAdmin().then(function(t){t.data.success?e("ADMIN_SET_USERS",t.data.entities):(console.log(t.data.error),alert(t.data.error))})["catch"](function(t){alert(t)})},ADMIN_FETCH_BOOKS:function(t){var e=t.commit,n=(t.dispatch,t.state,t.getters);return!!n.isAdmin&&_.getBooksByAdmin().then(function(t){t.data.success?e("ADMIN_SET_BOOKS",t.data.entities):(console.log(t.data.error),alert(t.data.error))})["catch"](function(t){alert(t)})},ADMIN_ADD_BOOK_TRACE:function(t,e){var n=t.commit,r=(t.dispatch,t.state,t.getters);return!!r.isAdmin&&_.addBookTraceByAdmin(e).then(function(t){t.data.success?(n("ADMIN_ADD_BOOK_TRACE",t.data.entity),alert("add successfully.")):(console.log(t.data.error),alert(t.data.error))})["catch"](function(t){alert(t)})},ADMIN_DEL_BOOK_TRACE:function(t,e){var n=t.commit,r=(t.dispatch,t.state,t.getters);return!!r.isAdmin&&_.deleteBookTraceByAdmin(e).then(function(t){t.data.success?(console.log(e),n("ADMIN_DEL_BOOK_TRACE",e),alert("delete successfully.")):(console.log(t.data.error),alert(t.data.error))})["catch"](function(t){alert(t)})},ADMIN_FETCH_BOOK_TRACES:function(t,e){var n=t.commit,r=(t.dispatch,t.state,t.getters);return!!r.isAdmin&&_.getBookTracesByAdmin(e).then(function(t){t.data.success?n("ADMIN_SET_BOOK_TRACES",{isbn:e.isbn,traces:t.data.entities}):(console.log(t.data.error),alert(t.data.error))})["catch"](function(t){alert(t)})},ADMIN_FETCH_BORROWS:function(t){var e=t.commit,n=(t.dispatch,t.state,t.getters);return!!n.isAdmin&&_.getBorrowsByAdmin().then(function(t){t.data.success?e("ADMIN_SET_BORROWS",t.data.entities):(console.log(t.data.error),alert(t.data.error))})["catch"](function(t){alert(t)})},ADMIN_ACCEPT_APPLICATION:function(t,e){var n=t.commit,r=(t.dispatch,t.state,t.getters);return!!r.isAdmin&&_.acceptLendingByAdmin(e).then(function(t){t.data.success?(n("ADMIN_SET_BORROW",t.data.entity),alert("accept application successfully.")):(console.log(t.data.error),alert(t.data.error))})["catch"](function(t){alert(t)})},ADMIN_REJECT_APPLICATION:function(t,e){var n=t.commit,r=(t.dispatch,t.state,t.getters);return!!r.isAdmin&&_.rejectLendingByAdmin(e).then(function(t){t.data.success?(n("ADMIN_SET_BORROW",t.data.entity),alert("reject application successfully.")):(console.log(t.data.error),alert(t.data.error))})["catch"](function(t){alert(t)})},ADMIN_CONFIRM_RETURNED:function(t,e){var n=t.commit,r=(t.dispatch,t.state,t.getters);return!!r.isAdmin&&_.confirmReturnedByAdmin(e).then(function(t){t.data.success?(n("ADMIN_SET_BORROW",t.data.entity),alert("confirm returned successfully.")):(console.log(t.data.error),alert(t.data.error))})["catch"](function(t){alert(t)})},ADMIN_CONFIRM_DISABLED:function(t,e){var n=t.commit,r=(t.dispatch,t.state,t.getters);return!!r.isAdmin&&_.confirmDisabledByAdmin(e).then(function(t){t.data.success?(n("ADMIN_SET_BORROW",t.data.entity),alert("confirm disabled successfully.")):(console.log(t.data.error),alert(t.data.error))})["catch"](function(t){alert(t)})},ADMIN_QUICK_BORROW:function(t,e){var n=t.commit,r=(t.dispatch,t.state,t.getters);return!!r.isAdmin&&_.quickBorrowByAdmin(e).then(function(t){t.data.success?(n("ADMIN_ADD_BORROW",t.data.entity),alert("borrow successfully.")):(console.log(t.data.error),alert(t.data.error))})["catch"](function(t){alert(t)})},ADMIN_QUICK_RETURN:function(t,e){var n=t.commit,r=(t.dispatch,t.state,t.getters);return!!r.isAdmin&&_.quickReturnByAdmin(e).then(function(t){t.data.success?(n("ADMIN_SET_BORROW",t.data.entity),alert("return successfully.")):(console.log(t.data.error),alert(t.data.error))})["catch"](function(t){alert(t)})},DUMP:function(){}},mutations:{DEL_ACCOUNT:function(t){t.account=null,localStorage.setItem("account",null)},SET_ACCOUNT:function(t,e){t.account=e,localStorage.setItem("account",(0,i["default"])(e))},SET_BOOKS:function(t,e){t.books=e},SET_BOOK_TRACES:function(t,e){var n=e.isbn,r=e.traces,o=b.getBook(t.books,n).value;o&&l["default"].set(o,"traces",r)},SET_BORROWS:function(t,e){t.borrows=e},SET_BORROW:function(t,e){var n=b.getBorrow(t.borrows,e.id).index;n&&l["default"].set(t.borrows,n,e)},ADMIN_SET_USERS:function(t,e){t.admin_users=e},ADMIN_ADD_BOOK:function(t,e){t.admin_books.unshift(e)},ADMIN_DEL_BOOK:function(t,e){e&&(e.status="DELETED")},ADMIN_SET_BOOKS:function(t,e){t.admin_books=e},ADMIN_ADD_BOOK_TRACE:function(t,e){var n=b.getBook(t.admin_books,e.isbn).value;n&&n.traces.push(e)},ADMIN_DEL_BOOK_TRACE:function(t,e){e&&l["default"].set(e,"status","DELETED")},ADMIN_SET_BOOK_TRACES:function(t,e){var n=e.isbn,r=e.traces,o=b.getBook(t.admin_books,n).value;o&&l["default"].set(o,"traces",r)},ADMIN_SET_BORROWS:function(t,e){t.admin_borrows=e},ADMIN_ADD_BORROW:function(t,e){t.admin_borrows.unshift(e)},ADMIN_SET_BORROW:function(t,e){var n=b.getBorrow(t.admin_borrows,e.id).index;n&&l["default"].set(t.admin_borrows,n,e)},DUMP:function(t){}},getters:{isLogin:function(t){return!!t.account},getAccount:function(t){return t.account},isAdmin:function(t){return t.account.roles.indexOf("ADMIN")!==-1},getBooks:function(t){return t.books},DUMP:function(t){}}});e["default"]=v},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(57),a=r(o);e["default"]={components:{Home:a["default"]},data:function(){return{}},methods:{logout:function(){this.$store.dispatch("LOGOUT"),this.$router.push("/index")}},computed:{isLogin:function(){return this.$store.getters.isLogin},account:function(){return this.$store.getters.getAccount},isAdmin:function(){return this.$store.getters.isAdmin}}}},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),a=r(o),i=function(t,e){if(t instanceof Array){for(var n in t){var r=t[n];if(r===e)return!0}return!1}};e["default"]={props:["traces"],watch:{},computed:{isLogin:function(){return this.$store.getters.isLogin},isReachLimit:function(){return 0===this.$store.getters.getAccount.loanLimit},DUMP:function(){}},methods:{isTraceVisible:function(t){return t&&i(["NORMAL","LOCKED","BORROWED"],t.status)},isTraceBorrowable:function(t){return t&&i(["NORMAL"],t.status)},isTraceReservable:function(t){return t&&!!t.isReservable&&this.isLogin&&this.$store.state.account.id!==t.loan.userId},borrow:function(t){a.borrowBookTrace(t).then(function(e){e.data.success?(t.status="LOCKED",alert("book trace is locked successfully, please ask the administrator to check in 2 hours.")):alert(e.data.error)})["catch"](function(t){alert(t)})},reserve:function(t){a.reserveBookTrace(t).then(function(e){e.data.success?(t.isReservable=!1,alert("book trace is reserved successfully, you'll receive our notice mail after it is returned.")):alert(e.data.error)})["catch"](function(t){alert(t)})}}}},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),a=(r(o),function(t,e){if(t instanceof Array){for(var n in t){var r=t[n];if(r===e)return!0}return!1}}),i=function(t,e){return(new Array(e).join("0")+t.toString()).slice(-e)};e["default"]={data:function(){return{activeTab:0,DUMP:null}},beforeMount:function(){this.$store.dispatch("FETCH_BORROWS")},watch:{},computed:{filteredBorrows:function(){var t=this;return this.$store.state.borrows.filter(function(e){return t.isBorrowVisible(e)})}},methods:{datetime:function(t,e){if(e){var n=new Date(e),r=n.getFullYear(),o=i(n.getMonth()+1,2),a=i(n.getDate(),2),s=i(n.getHours(),2),c=i(n.getMinutes(),2),u=i(n.getSeconds(),2);return t+" "+r+"-"+o+"-"+a+" "+s+":"+c+":"+u}},tab:function(t){this.activeTab=t},isBorrowVisible:function(t){var e={0:["APPLYING","RESERVING"],1:["ACTIVE"],3:["RETURNED"],2:["EXPIRED","CANCELED","REJECTED"]};return t&&a(e[this.activeTab],t.status)},cancelApplication:function(t){this.$store.dispatch("CANCEL_APPLICATION",t)},cancelReservation:function(t){this.$store.dispatch("CANCEL_RESERVATION",t)},renewBorrow:function(t){this.$store.dispatch("RENEW_BORROW",t)},DUMP:function(){}}}},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(24),i=o(a),s=n(5),c=(r(s),n(152)),u=o(c),l=function(t,e){if(t instanceof Array){for(var n in t){var r=t[n];if(r===e)return!0}return!1}};e["default"]={data:function(){return{searchInput:"",current:null}},watch:{},computed:{filteredBooks:function(){var t=this;return this.$store.state.books.filter(function(e){return t.isBookVisible(e)})},DUMP:function(){}},methods:{search:function(){var t=this.searchInput;t&&this.$store.dispatch("SEARCH_BOOKS",{isbn:t,name:t})},isBookVisible:function(t){return t&&l(["NORMAL","LOCKED","BORROWED"],t.status)},isActiveBook:function(t){return t.active},toggleBook:function(t){i["default"].set(t,"active",!t.active),t.active&&this.$store.dispatch("FETCH_BOOK_TRACES",t)},DUMP:function(){}},components:{"trace-list":u["default"]}}},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),a=r(o);e["default"]={data:function(){return{account:{username:"",password:""},data:{name:""}}},methods:{login:function(){var t=this;return a.login(this.account).then(function(e){e.data.success?(t.$store.dispatch("LOGIN",e.data.entity),t.$router.push("/index")):alert(e.data.error)})["catch"](function(t){alert(t)}),!1}},watch:{}}},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),a=r(o);e["default"]={data:function(){return{account:{username:"",password:""},data:{name:""}}},methods:{setAvatar:function(t){var e=t.target,n=e.files;n&&0!==n.length?this.account.avatar=n[0]:this.account.avatar=null},register:function(){var t=this;return a.register(this.account).then(function(e){e.data.success?(alert("register successfully!"),t.$router.push("/login")):alert(e.data.error)})["catch"](function(t){alert(t)}),!1}},watch:{}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={data:function(){return{user:this.$store.state.account}}}},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(99),i=o(a),s=n(5),c=r(s),u=function(t,e){if(t instanceof Array){for(var n in t){var r=t[n];if(r===e)return!0}return!1}},l=window.$;e["default"]={data:function(){return{doubanISBN:"",newBook:{},filteredBooks:[],searchInput:"",book:null,newTrace:{},DUMP:null}},beforeMount:function(){var t=this;this.$store.dispatch("ADMIN_FETCH_BOOKS").then(function(){t.filteredBooks=t.$store.state.admin_books.filter(function(e){return t.isBookVisible(e)})})},watch:{searchInput:function(t){var e=this;this.filteredBooks=this.$store.state.admin_books.filter(function(t){return e.isBookVisible(t)})}},computed:{filteredTraces:function(){var t=this;if(!this.book.traces)return[];var e=function(){var e=t;return{v:t.book.traces.filter(function(t){return e.isTraceVisible(t)})}}();return"object"===("undefined"==typeof e?"undefined":(0,i["default"])(e))?e.v:void 0}},methods:{fetchDouban:function(t){var e=this;c.fetchDouban(t).then(function(n){var r=n.data;if(r.isbn13===t){var o={isbn:r.isbn13,name:r.title,publisher:r.publisher,authors:r.author.length?"#"+r.author.join("#"):"",imageUrl:r.image,desc:r.summary};e.newBook=o}})},setNewBookImage:function(t){var e=t.target,n=e.files;n&&0!==n.length?this.newBook.image=n[0]:this.newBook.image=null},addBook:function(t){return this.$store.dispatch("ADMIN_ADD_BOOK",t),!1},isBookVisible:function(t){var e=this.searchInput.toLowerCase().trim();return t&&u(["NORMAL"],t.status)&&(!e.length||t.isbn.toLowerCase().indexOf(e)!==-1)},showBookDetail:function(t){this.book=t,this.newTrace.isbn=t.isbn,this.$store.dispatch("ADMIN_FETCH_BOOK_TRACES",t).then(function(){}),l("#modal-book-detail").modal("show")},hideBookDetail:function(){l("#modal-book-detail").modal("hide")},deleteBook:function(t){this.$store.dispatch("ADMIN_DEL_BOOK",t)},addTrace:function(t){return this.$store.dispatch("ADMIN_ADD_BOOK_TRACE",t),!1},isTraceVisible:function(t){return t&&u(["NORMAL","LOCKED","BORROWED"],t.status)},deleteTrace:function(t){this.$store.dispatch("ADMIN_DEL_BOOK_TRACE",t)}}}},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),a=(r(o),function(t,e){if(t instanceof Array){for(var n in t){var r=t[n];if(r===e)return!0}return!1}});e["default"]={data:function(){return{quickBorrowForm:{},quickReturnForm:{},searchInput:"",activeTab:0,DUMP:{}}},beforeMount:function(){this.$store.dispatch("ADMIN_FETCH_BORROWS")},watch:{},computed:{filteredBorrows:function(){var t=this;return this.$store.state.admin_borrows.filter(function(e){return t.isBorrowVisible(e)})}},methods:{datetime:function(t,e){if(e){var n=new Date(e),r=n.getFullYear(),o=n.getMonth()+1,a=n.getDate(),i=n.getHours(),s=n.getMinutes(),c=n.getSeconds();return t+" "+r+"-"+o+"-"+a+" "+i+":"+s+":"+c}},tab:function(t){this.$store.dispatch("ADMIN_FETCH_BORROWS"),this.activeTab=t},isBorrowVisible:function(t){var e={0:["APPLYING","RESERVING"],1:["ACTIVE"],3:["RETURNED"],2:["EXPIRED","CANCELED","REJECTED"]},n=this.searchInput.toLowerCase().trim();return t&&a(e[this.activeTab],t.status)&&n.length&&t.user.username.toLowerCase().indexOf(n)!==-1},quickBorrow:function(){if(this.quickBorrowForm.trace){var t=this.quickBorrowForm.trace.indexOf(":");t!==-1&&this.$store.dispatch("ADMIN_QUICK_BORROW",{isbn:this.quickBorrowForm.trace.substring(0,t),traceId:this.quickBorrowForm.trace.substring(t+1),username:this.quickBorrowForm.username})}},quickReturn:function(){if(this.quickReturnForm.trace){var t=this.quickReturnForm.trace.indexOf(":");t!==-1&&this.$store.dispatch("ADMIN_QUICK_RETURN",{isbn:this.quickReturnForm.trace.substring(0,t),traceId:this.quickReturnForm.trace.substring(t+1)})}},acceptApplication:function(t){this.$store.dispatch("ADMIN_ACCEPT_APPLICATION",t)},rejectApplication:function(t){this.$store.dispatch("ADMIN_REJECT_APPLICATION",t)},confirmReturned:function(t){this.$store.dispatch("ADMIN_CONFIRM_RETURNED",t)},confirmDisabled:function(t){this.$store.dispatch("ADMIN_CONFIRM_DISABLED",t)},DUMP:function(){}}}},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),a=r(o);e["default"]={data:function(){return{newBook:{name:"",isbn:"",total:null,margin:null},loadingTrace:!1,newTrace:{},filterBooks:[],searchInput:"",currentSelectBook:null,currentTrace:[]}},methods:{addNewBook:function(){var t=this;return a.addBookByAdmin(this.newBook).then(function(e){e.data.success?(t.$store.dispatch("ADD_NEW_BOOK",t.newBook),t.newBook={}):alert("add fail!")})["catch"](function(t){alert("add fail!")}),!1},deleteBook:function(t){var e=this;a.deleteBookByAdmin(t.isbn).then(function(t){t.data.success?e.$store.dispatch("FETCH_ALL_BOOKS_BY_ADMIN"):alert("delete book fail!")})["catch"](function(t){alert(t),alert("delete book fail!")})},selectBook:function(t){var e=this;this.loadingTrace||(this.currentSelectBook===t?(this.currentTrace=null,this.currentSelectBook=null):(this.currentSelectBook=t,this.loadingTrace=!0,a.getBookTraceByAdmin(t.isbn).then(function(t){e.loadingTrace=!1,t.data.success?e.currentTrace=t.data.entities:alert("fetch failed!")})["catch"](function(t){e.loadingTrace=!1,alert("fetch failed!"+t)})))},addTrace:function(){var t=this;this.loadingTrace||a.addBookTraceByAdmin(this.currentSelectBook,this.newTrace).then(function(e){t.newTrace={},e.data.success?t.currentTrace.push(e.data.entity):alert("add trace failed!")})["catch"](function(e){t.newTrace={},alert("add trace failed!"+e)})},deleteTrace:function(t){a.deleteBookTraceByAdmin(t).then(function(e){e.data.success?t.status="DELETED":alert("delete failed!")})["catch"](function(t){alert("delete failed!"+t)})},borrowTrace:function(t){a.borrowBookTraceByAdmin(t).then(function(e){e.data.success?t.status="BORROWED":alert("borrow failed!")})["catch"](function(t){alert("borrow failed!"+t)})}},watch:{searchInput:function(t){this.currentSelectBook=null,this.filterBooks=this.$store.state.books.filter(function(e){return e.name&&e.name.toLowerCase().indexOf(t.toLowerCase().trim())!==-1})}},computed:{allBooks:function(){return this.$store.state.books}},beforeMount:function(){var t=this;this.$store.dispatch("FETCH_ALL_BOOKS_BY_ADMIN").then(function(){t.searchInput||(t.filterBooks=t.$store.state.books)})}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,function(t,e,n){var r,o;n(141),r=n(84);var a=n(160);o=r=r||{},"object"!=typeof r["default"]&&"function"!=typeof r["default"]||(o=r=r["default"]),"function"==typeof o&&(o=o.options),o.render=a.render,o.staticRenderFns=a.staticRenderFns,t.exports=r},function(t,e,n){var r,o;r=n(85);var a=n(161);o=r=r||{},"object"!=typeof r["default"]&&"function"!=typeof r["default"]||(o=r=r["default"]),"function"==typeof o&&(o=o.options),o.render=a.render,o.staticRenderFns=a.staticRenderFns,t.exports=r},function(t,e,n){var r,o;n(146),r=n(86);var a=n(166);o=r=r||{},"object"!=typeof r["default"]&&"function"!=typeof r["default"]||(o=r=r["default"]),"function"==typeof o&&(o=o.options),o.render=a.render,o.staticRenderFns=a.staticRenderFns,o._scopeId="data-v-6",t.exports=r},function(t,e,n){var r,o;n(143),r=n(88);var a=n(163);o=r=r||{},"object"!=typeof r["default"]&&"function"!=typeof r["default"]||(o=r=r["default"]),"function"==typeof o&&(o=o.options),o.render=a.render,o.staticRenderFns=a.staticRenderFns,o._scopeId="data-v-3",t.exports=r},function(t,e,n){var r,o;n(145),r=n(89);var a=n(165);o=r=r||{},"object"!=typeof r["default"]&&"function"!=typeof r["default"]||(o=r=r["default"]),"function"==typeof o&&(o=o.options),o.render=a.render,o.staticRenderFns=a.staticRenderFns,o._scopeId="data-v-5",t.exports=r},function(t,e,n){var r,o;n(144),r=n(90);var a=n(164);o=r=r||{},"object"!=typeof r["default"]&&"function"!=typeof r["default"]||(o=r=r["default"]),"function"==typeof o&&(o=o.options),o.render=a.render,o.staticRenderFns=a.staticRenderFns,o._scopeId="data-v-4",t.exports=r},function(t,e,n){var r,o;n(148),r=n(91);var a=n(168);o=r=r||{},"object"!=typeof r["default"]&&"function"!=typeof r["default"]||(o=r=r["default"]),"function"==typeof o&&(o=o.options),o.render=a.render,o.staticRenderFns=a.staticRenderFns,o._scopeId="data-v-8",t.exports=r},function(t,e,n){var r,o;n(147),r=n(92);var a=n(167);o=r=r||{},"object"!=typeof r["default"]&&"function"!=typeof r["default"]||(o=r=r["default"]),"function"==typeof o&&(o=o.options),o.render=a.render,o.staticRenderFns=a.staticRenderFns,o._scopeId="data-v-7",t.exports=r},function(t,e,n){var r,o;n(149),r=n(93);var a=n(169);o=r=r||{},"object"!=typeof r["default"]&&"function"!=typeof r["default"]||(o=r=r["default"]),"function"==typeof o&&(o=o.options),o.render=a.render,o.staticRenderFns=a.staticRenderFns,o._scopeId="data-v-9",t.exports=r},function(module,exports){module.exports={render:function(){with(this)return _h("div",{attrs:{id:"app"}},[_h("div",{attrs:{id:"header"}},[_h("router-link",{attrs:{id:"header-title",to:"/"}},["Purjoy Library Management System"])," ",isLogin?_h("div",{staticClass:"user-operation-panel"},[_h("span",["Welcome, ",_h("router-link",{attrs:{id:"username",to:"/user"}},[_s(account.name)])])," ",_h("span",{staticClass:"action-bar"},[isAdmin?[_m(0)," ",_m(1)," ",_h("router-link",{staticClass:"header-button",attrs:{to:"/admin/books"}},["Manage Books"])," ",_m(2)," ",_h("router-link",{staticClass:"header-button",attrs:{to:"/admin/borrows"}},["Manage Borrows"])," ",_m(3)," ",_h("router-link",{staticClass:"header-button",attrs:{to:"/admin/users"}},["Manage Users"])]:_e()," ",_m(4)," ",_h("router-link",{staticClass:"header-button",attrs:{to:"/user/borrows"}},["My Borrows"])])," ",_m(5)," ",_h("a",{staticClass:"header-button",attrs:{href:"#"},on:{click:logout}},["Logout"])]):_h("div",{staticClass:"user-operation-panel"},[_h("router-link",{staticClass:"header-button",attrs:{to:"/user/login"}},["Login"])," ",_h("div",{staticClass:"button-divider"},["|"])," ",_h("router-link",{staticClass:"header-button",attrs:{to:"/user/register"}},["Register"])])," "])," ",_h("transition",{attrs:{name:"fade",mode:"out-in"}},[_h("router-view",{staticClass:"view"})])," ",_m(6)])},staticRenderFns:[function(){with(this)return _h("h5",{staticClass:"admin"},[" ( admin ) "])},function(){with(this)return _h("span",{staticClass:"button-divider"},["|"])},function(){with(this)return _h("span",{staticClass:"button-divider"},["|"]);
},function(){with(this)return _h("span",{staticClass:"button-divider"},["|"])},function(){with(this)return _h("span",{staticClass:"button-divider"},["|"])},function(){with(this)return _h("div",{staticClass:"button-divider"},["|"])},function(){with(this)return _h("div",{staticClass:"container clearfix"},[_h("hr")," ",_h("footer",{staticClass:"text-muted"},["\n      SPM 2016.\n    "])," ",_h("br")])}]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"trace-list"},[traces&&traces.length?_h("div",[_h("table",{staticClass:"table table-bordered table-condensed table-hover"},[_m(0)," ",_h("tbody",[_l(traces,function(t){return _h("tr",{directives:[{name:"show",value:isTraceVisible(t),expression:"isTraceVisible(trace)"}]},[_h("td",["No."+_s(t.id)+' on "'+_s(t.location)+'"'])," ",_h("td",[_s(t.status)])," ",_h("td",[isLogin?[_h("button",{directives:[{name:"show",value:isTraceBorrowable(t),expression:"isTraceBorrowable(trace)"}],on:{click:function(e){borrow(t)}}},["\n              borrow\n            "])," ","BORROWED"===t.status?[_h("button",{directives:[{name:"show",value:isTraceReservable(t),expression:"isTraceReservable(trace)"}],on:{click:function(e){reserve(t)}}},["\n                reserve\n              "])]:_e()]:["\n            Please login first.\n          "]," "])])})])])]):["\n    no book trace yet.\n  "]," "])},staticRenderFns:[function(){with(this)return _h("thead",[_h("tr",[_h("th",["trace"])," ",_h("th",["status"])," ",_h("th",["operation"])])])}]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"book-page"},[_h("input",{directives:[{name:"model",value:searchInput,expression:"searchInput",modifiers:{trim:!0}}],staticClass:"input-search",attrs:{autofocus:"",autocomplete:"off",placeholder:"Search books here"},domProps:{value:_s(searchInput)},on:{keyup:function(t){13===t.keyCode&&search(t)},input:function(t){t.target.composing||(searchInput=t.target.value.trim())}}})," ",_m(0)," ",_h("div",{staticClass:"container"},[_h("div",{staticClass:"panel panel-default"},[_m(1)," ",_h("div",{staticClass:"panel-body"},[filteredBooks&&filteredBooks.length?_h("div",{staticClass:"list-group"},[_l(filteredBooks,function(t){return _h("div",{key:t.isbn,staticClass:"list-group-item"},[_h("div",{staticClass:"media"},[_h("div",{staticClass:"media-left"},[_h("img",{staticClass:"img-book",attrs:{src:t.imageUrl}})])," ",_h("div",{staticClass:"media-body"},[_h("h4",{staticClass:"media-heading list-group-item-heading"},["\n                  "+_s(t.name)+"\n                "])," ",_h("table",{staticClass:"table table-bordered table-condensed table-hover"},[_h("tbody",[t.isbn?_h("tr",[_m(2)," ",_h("td",[_s(t.isbn)])]):_e()," ",t.publisher?_h("tr",[_m(3)," ",_h("td",[_s(t.publisher)])]):_e()," ",t.authors&&t.authors.length?_h("tr",[_m(4)," ",_h("td",[_s(t.authors.join(", "))])]):_e()," ",t.desc?_h("tr",[_m(5)," ",_h("td",[_s(t.desc)])]):_e()])])," ",_h("div",[isActiveBook(t)?_h("button",{staticClass:"btn btn-danger",on:{click:function(e){toggleBook(t)}}},["Hide traces"]):_h("button",{staticClass:"btn btn-primary",on:{click:function(e){toggleBook(t)}}},["Check traces"])," "])," ",_h("div",{directives:[{name:"show",value:isActiveBook(t),expression:"isActiveBook(book)"}]},[_m(6)," ",_h("trace-list",{attrs:{traces:t.traces}})])])])])})]):_h("div",["\n          no matched books.\n        "])," "])])])])},staticRenderFns:[function(){with(this)return _h("hr")},function(){with(this)return _h("div",{staticClass:"panel-heading"},["\n        Search Results\n      "])},function(){with(this)return _h("td",["ISBN"])},function(){with(this)return _h("td",["Publisher"])},function(){with(this)return _h("td",["Authors"])},function(){with(this)return _h("td",["Description"])},function(){with(this)return _h("br")}]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{attrs:{id:"login-panel"}},[_m(0)," ",_h("form",{attrs:{id:"login-form"},on:{submit:function(t){t.preventDefault(),login(t)}}},[_h("input",{directives:[{name:"model",value:account.username,expression:"account.username"}],staticClass:"form-control",attrs:{placeholder:"username",type:"text"},domProps:{value:_s(account.username)},on:{input:function(t){t.target.composing||(account.username=t.target.value)}}})," ",_h("input",{directives:[{name:"model",value:account.password,expression:"account.password"}],staticClass:"form-control",attrs:{placeholder:"password",type:"password"},domProps:{value:_s(account.password)},on:{input:function(t){t.target.composing||(account.password=t.target.value)}}})," ",_m(1)])])},staticRenderFns:[function(){with(this)return _h("h1",["Login"])},function(){with(this)return _h("button",{staticClass:"action-button btn btn-success btn-block",attrs:{type:"submit"}},["login"])}]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{attrs:{id:"user-panel"}},[user?_h("div",[_m(0)," ",_h("div",[_h("div",{staticClass:"info-row"},[_m(1),"\n        "+_s(user.username)+"\n      "])," ",_h("div",{staticClass:"info-row"},[_m(2),"\n        "+_s(user.name)+"\n      "])," ",_h("div",{staticClass:"info-row"},[_m(3),"\n        "+_s(user.age)+"\n      "])," ",_h("div",{staticClass:"info-row"},[_m(4),"\n        "+_s(user.major)+"\n      "])," ",_h("div",{staticClass:"info-row"},[_m(5),"\n        "+_s(user.email)+"\n      "])," ",_h("div",{staticClass:"info-row"},[_m(6),"\n        "+_s(user.phone)+"\n      "])," ",_h("div",{staticClass:"info-row"},[_m(7),"\n        "+_s(user.remarks)+"\n      "])])]):_h("h1",[" UnLogin"])," "])},staticRenderFns:[function(){with(this)return _h("h1",{attrs:{id:"title"}},[" My Info "])},function(){with(this)return _h("h4",["Username:"])},function(){with(this)return _h("h4",["Name:"])},function(){with(this)return _h("h4",["Age:"])},function(){with(this)return _h("h4",["Major:"])},function(){with(this)return _h("h4",["Email:"])},function(){with(this)return _h("h4",["Phone:"])},function(){with(this)return _h("h4",["Description:"])}]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{attrs:{id:"register-panel"}},[_m(0)," ",_h("form",{staticClass:"form-horizontal",attrs:{id:"register-form"},on:{submit:function(t){t.preventDefault(),register(t)}}},[_h("div",{staticClass:"form-group"},[_m(1)," ",_h("input",{directives:[{name:"model",value:account.username,expression:"account.username"}],staticClass:"form-control",attrs:{id:"username",placeholder:"input your student ID",type:"text"},domProps:{value:_s(account.username)},on:{input:function(t){t.target.composing||(account.username=t.target.value)}}})," ",_m(2)," ",_h("input",{directives:[{name:"model",value:account.password,expression:"account.password"}],staticClass:"form-control",attrs:{id:"password",placeholder:"password",type:"password"},domProps:{value:_s(account.password)},on:{input:function(t){t.target.composing||(account.password=t.target.value)}}})," ",_m(3)," ",_h("input",{directives:[{name:"model",value:account.name,expression:"account.name",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:"name",placeholder:"your name",type:"text"},domProps:{value:_s(account.name)},on:{input:function(t){t.target.composing||(account.name=t.target.value.trim())}}})," ",_m(4)," ",_h("input",{directives:[{name:"model",value:account.age,expression:"account.age",modifiers:{number:!0}}],staticClass:"form-control",attrs:{id:"age",placeholder:"your age",type:"number"},domProps:{value:_s(account.age)},on:{input:function(t){t.target.composing||(account.age=_n(t.target.value))}}})," ",_m(5)," ",_h("input",{staticClass:"form-control",attrs:{id:"avatar",placeholder:"your avatar",type:"file"},on:{change:setAvatar}})," ",_m(6)," ",_h("input",{directives:[{name:"model",value:account.major,expression:"account.major",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:"major",placeholder:"your major",type:"text"},domProps:{value:_s(account.major)},on:{input:function(t){t.target.composing||(account.major=t.target.value.trim())}}})," ",_m(7)," ",_h("input",{directives:[{name:"model",value:account.phone,expression:"account.phone",modifiers:{tel:!0}}],staticClass:"form-control",attrs:{id:"phone",placeholder:"your phone number",type:"tel"},domProps:{value:_s(account.phone)},on:{input:function(t){t.target.composing||(account.phone=t.target.value)}}})," ",_m(8)," ",_h("input",{directives:[{name:"model",value:account.email,expression:"account.email",modifiers:{email:!0}}],staticClass:"form-control",attrs:{id:"email",placeholder:"your email to receive notices",type:"email"},domProps:{value:_s(account.email)},on:{input:function(t){t.target.composing||(account.email=t.target.value)}}})," ",_m(9)," ",_h("textarea",{directives:[{name:"model",value:account.remarks,expression:"account.remarks",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:"remarks",rows:"3",placeholder:"anything you want!"},domProps:{value:_s(account.remarks)},on:{input:function(t){t.target.composing||(account.remarks=t.target.value.trim())}}})," ",_m(10)])])])},staticRenderFns:[function(){with(this)return _h("h1",["Register"])},function(){with(this)return _h("label",{attrs:{"for":"username"}},["username"])},function(){with(this)return _h("label",{attrs:{"for":"password"}},["password"])},function(){with(this)return _h("label",{attrs:{"for":"name"}},["name ",_h("small",{staticClass:"text-muted"},["optional"])])},function(){with(this)return _h("label",{attrs:{"for":"age"}},["age ",_h("small",{staticClass:"text-muted"},["optional"])])},function(){with(this)return _h("label",{attrs:{"for":"avatar"}},["avatar ",_h("small",{staticClass:"text-muted"},["optional"])])},function(){with(this)return _h("label",{attrs:{"for":"major"}},["major ",_h("small",{staticClass:"text-muted"},["optional"])])},function(){with(this)return _h("label",{attrs:{"for":"phone"}},["phone ",_h("small",{staticClass:"text-muted"},["optional"])])},function(){with(this)return _h("label",{attrs:{"for":"email"}},["email ",_h("small",{staticClass:"text-muted"},["optional"])])},function(){with(this)return _h("label",{attrs:{"for":"remarks"}},["remarks ",_h("small",{staticClass:"text-muted"},["optional"])])},function(){with(this)return _h("button",{staticClass:"btn btn-success btn-block",attrs:{type:"submit"}},["register"])}]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"container"},[_m(0)," ",_h("div",{staticClass:"btn-toolbar"},[_h("div",{staticClass:"btn-group"},[_h("button",{staticClass:"btn btn-primary","class":{active:0===activeTab},attrs:{type:"button"},on:{click:function(t){tab(0)}}},["APPLYING & RESERVING"])," ",_h("button",{staticClass:"btn btn-success","class":{active:1===activeTab},attrs:{type:"button"},on:{click:function(t){tab(1)}}},["ACTIVE BORROWS"])," ",_h("button",{staticClass:"btn btn-default","class":{active:3===activeTab},attrs:{type:"button"},on:{click:function(t){tab(3)}}},["RETURNED RECORDS"])," ",_h("button",{staticClass:"btn btn-default","class":{active:2===activeTab},attrs:{type:"button"},on:{click:function(t){tab(2)}}},["OTHERS"])])])," ",_m(1)," ",_h("table",{staticClass:"table table-bordered table-condensed table-hover"},[_m(2)," ",filteredBorrows&&filteredBorrows.length?_h("tbody",[_l(filteredBorrows,function(t){return _h("tr",[_h("td",[_h("ul",[_h("li",["\n            "+_s(t.trace.book.name)+" (ISBN: "+_s(t.trace.book.isbn)+")\n          "])," ",_h("li",["\n            No."+_s(t.trace.id)+" from "+_s(t.trace.location)+"\n          "])," ",_h("li",[_h("img",{attrs:{src:"http://barcode.tec-it.com/barcode.ashx?data="+t.trace.isbn+":"+t.traceId+"&code=Code128&dpi=96"}})])])])," ",_h("td",[_h("ul",[_h("li",["Borrow No."+_s(t.id)])," ",_h("li",["Status: "+_s(t.status)])])])," ",_h("td",[_h("ul",[t.applyingTime?_h("li",[_s(datetime("applied at",t.applyingTime))]):_e()," ",t.expiredTime?_h("li",[_s(datetime("expire at",t.expiredTime))]):_e()," ",t.activeTime?_h("li",[_s(datetime("active at",t.activeTime))]):_e()," ",t.appointedTime?_h("li",[_s(datetime("appointed until",t.appointedTime))]):_e()])])," ",_h("td",["APPLYING"===t.status?[_h("button",{staticClass:"btn btn-danger btn-block btn-xs",on:{click:function(e){cancelApplication(t)}}},["cancel"])]:_e()," ","RESERVING"===t.status?[_h("button",{staticClass:"btn btn-danger btn-block btn-xs",on:{click:function(e){cancelReservation(t)}}},["cancel"])]:_e()," ","ACTIVE"===t.status&&0===t.renewCount?[_h("button",{staticClass:"btn btn-success btn-block btn-xs",on:{click:function(e){renewBorrow(t)}}},["renew"])]:_e()])])})]):_h("tbody",[_h("tr",[_h("td",{attrs:{colspan:"4",style:"text-align: center"}},["empty."])])])," "])])},staticRenderFns:[function(){with(this)return _h("h2",["My Borrows"])},function(){with(this)return _h("br")},function(){with(this)return _h("thead",[_h("tr",[_h("th",["book trace"])," ",_h("th",["status"])," ",_h("th",["info"])," ",_h("th",["operation"])])])}]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"container"},[_h("div",{staticClass:"col-sm-3"},[_m(0)," ",_h("form",{on:{submit:function(t){t.preventDefault(),quickBorrow(t)}}},[_h("input",{directives:[{name:"model",value:quickBorrowForm.trace,expression:"quickBorrowForm.trace"}],staticClass:"form-control",attrs:{type:"text",id:"borrow_trace",placeholder:"barcode",required:""},domProps:{value:_s(quickBorrowForm.trace)},on:{input:function(t){t.target.composing||(quickBorrowForm.trace=t.target.value)}}})," "," ",_h("input",{directives:[{name:"model",value:quickBorrowForm.username,expression:"quickBorrowForm.username"}],staticClass:"form-control",attrs:{type:"text",id:"borrow_username",placeholder:"username",required:""},domProps:{value:_s(quickBorrowForm.username)},on:{input:function(t){t.target.composing||(quickBorrowForm.username=t.target.value)}}})," ",_m(1)])," ",_m(2)," ",_h("form",{on:{submit:function(t){t.preventDefault(),quickReturn(t)}}},[_h("input",{directives:[{name:"model",value:quickReturnForm.trace,expression:"quickReturnForm.trace"}],staticClass:"form-control",attrs:{type:"text",id:"return_trace",placeholder:"barcode",required:""},domProps:{value:_s(quickReturnForm.trace)},on:{input:function(t){t.target.composing||(quickReturnForm.trace=t.target.value)}}})," ",_m(3)])])," ",_h("div",{staticClass:"col-sm-9"},[_h("input",{directives:[{name:"model",value:searchInput,expression:"searchInput"}],staticClass:"input-search",attrs:{autofocus:"",autocomplete:"off",placeholder:"Search by username here"},domProps:{value:_s(searchInput)},on:{input:function(t){t.target.composing||(searchInput=t.target.value)}}})," ",_h("div",{staticClass:"btn-toolbar"},[_h("div",{staticClass:"btn-group"},[_h("button",{staticClass:"btn btn-primary","class":{active:0===activeTab},attrs:{type:"button"},on:{click:function(t){tab(0)}}},["\n          APPLYING & RESERVING\n        "])," ",_h("button",{staticClass:"btn btn-success","class":{active:1===activeTab},attrs:{type:"button"},on:{click:function(t){tab(1)}}},["ACTIVE\n          BORROWS\n        "])," ",_h("button",{staticClass:"btn btn-default","class":{active:3===activeTab},attrs:{type:"button"},on:{click:function(t){tab(3)}}},["\n          RETURNED RECORDS\n        "])," ",_h("button",{staticClass:"btn btn-default","class":{active:2===activeTab},attrs:{type:"button"},on:{click:function(t){tab(2)}}},["\n          OTHERS\n        "])])])," ",_m(4)," ",_h("table",{staticClass:"table table-bordered table-condensed table-hover"},[_m(5)," ",filteredBorrows&&filteredBorrows.length?_h("tbody",[_l(filteredBorrows,function(t){return _h("tr",[_h("td",[_h("ul",[_h("li",["\n              "+_s(t.trace.book.name)+", "+_s(t.trace.book.publisher)+"\n              ",_m(6),"\n              by "+_s(t.trace.book.authors.join(", "))+"\n            "])," ",_h("li",["No."+_s(t.trace.id)+" on "+_s(t.trace.location)])])])," ",_h("td",["\n          "+_s(t.user.username)+"\n        "])," ",_h("td",["\n          "+_s(t.status)+"\n        "])," ",_h("td",[_h("ul",[t.applyingTime?_h("li",[_s(datetime("applied at",t.applyingTime))]):_e()," ",t.expiredTime?_h("li",[_s(datetime("expire at",t.expiredTime))]):_e()," ",t.activeTime?_h("li",[_s(datetime("active at",t.activeTime))]):_e()," ",t.appointedTime?_h("li",[_s(datetime("appointed until",t.appointedTime))]):_e()])])," ",_h("td",["APPLYING"===t.status?[_h("button",{staticClass:"btn btn-success btn-block btn-xs",on:{click:function(e){acceptApplication(t)}}},["accept"])," ",_h("button",{staticClass:"btn btn-danger btn-block btn-xs",on:{click:function(e){rejectApplication(t)}}},["reject"])]:_e()," ","ACTIVE"===t.status?[_h("button",{staticClass:"btn btn-success btn-block btn-xs",on:{click:function(e){confirmReturned(t)}}},["confirm returned"])," "]:_e()])])})]):_h("tbody",[_h("tr",[_h("td",{attrs:{colspan:"5",style:"text-align: center"}},["empty."])])])," "])])])},staticRenderFns:[function(){with(this)return _h("h3",["Quick Borrow"])},function(){with(this)return _h("button",{staticClass:"btn btn-default btn-block",attrs:{type:"submit"}},["submit"])},function(){with(this)return _h("h3",["Quick Return"])},function(){with(this)return _h("button",{staticClass:"btn btn-default btn-block",attrs:{type:"submit"}},["submit"])},function(){with(this)return _h("br")},function(){with(this)return _h("thead",[_h("tr",[_h("th",["book trace"])," ",_h("th",["user"])," ",_h("th",["status"])," ",_h("th",["info"])," ",_h("th",["operation"])])])},function(){with(this)return _h("br")}]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"container"},[_h("div",{staticClass:"col-sm-4"},[_m(0)," ",_h("div",{},[_h("form",{on:{submit:function(t){t.preventDefault(),fetchDouban(doubanISBN)}}},[_h("input",{directives:[{name:"model",value:doubanISBN,expression:"doubanISBN"}],staticClass:"form-control",attrs:{placeholder:"ISBN",type:"text",required:""},domProps:{value:_s(doubanISBN)},on:{input:function(t){t.target.composing||(doubanISBN=t.target.value)}}})," ",_m(1)])," ",_m(2)," ",_h("form",{on:{submit:function(t){t.preventDefault()}}},[_m(3)," ",_h("input",{directives:[{name:"model",value:newBook.isbn,expression:"newBook.isbn"}],staticClass:"form-control",attrs:{type:"text",id:"new-isbn",required:""},domProps:{value:_s(newBook.isbn)},on:{input:function(t){t.target.composing||(newBook.isbn=t.target.value)}}})," ",_m(4)," ",_h("input",{directives:[{name:"model",value:newBook.name,expression:"newBook.name"}],staticClass:"form-control",attrs:{type:"text",id:"new-name",required:""},domProps:{value:_s(newBook.name)},on:{input:function(t){t.target.composing||(newBook.name=t.target.value)}}})," ",_m(5)," ",_h("input",{directives:[{name:"model",value:newBook.publisher,expression:"newBook.publisher"}],staticClass:"form-control",attrs:{type:"text",id:"new-publisher"},domProps:{value:_s(newBook.publisher)},on:{input:function(t){t.target.composing||(newBook.publisher=t.target.value)}}})," ",_m(6)," ",_h("input",{directives:[{name:"model",value:newBook.authors,expression:"newBook.authors"}],staticClass:"form-control",attrs:{type:"text",id:"new-authors"},domProps:{value:_s(newBook.authors)},on:{input:function(t){t.target.composing||(newBook.authors=t.target.value)}}})," ",_m(7)," ",_h("input",{directives:[{name:"model",value:newBook.imageUrl,expression:"newBook.imageUrl"}],staticClass:"form-control",attrs:{type:"text",id:"new-imageUrl"},domProps:{value:_s(newBook.imageUrl)},on:{input:function(t){t.target.composing||(newBook.imageUrl=t.target.value)}}})," ",_m(8)," ",_h("input",{staticClass:"form-control",attrs:{type:"file",id:"new-image"},on:{change:setNewBookImage}})," ",_m(9)," ",_h("textarea",{directives:[{name:"model",value:newBook.desc,expression:"newBook.desc"}],staticClass:"form-control",attrs:{id:"new-desc",rows:"5"},domProps:{value:_s(newBook.desc)},on:{input:function(t){t.target.composing||(newBook.desc=t.target.value)}}})," ",_m(10)," ",_h("button",{staticClass:"btn btn-success btn-block",on:{click:function(t){addBook(newBook)}}},["add book"])])])])," ",_h("div",{staticClass:"col-sm-8"},[_h("input",{directives:[{name:"model",value:searchInput,expression:"searchInput"}],staticClass:"input-search",attrs:{autofocus:"",autocomplete:"off",placeholder:"Search by ISBN here"},domProps:{value:_s(searchInput)},on:{input:function(t){t.target.composing||(searchInput=t.target.value)}}})," ",_h("table",{staticClass:"table table-bordered table-condensed table-hover"},[_m(11)," ",filteredBooks&&filteredBooks.length?_h("tbody",[_l(filteredBooks,function(t){return _h("tr",[_h("td",[_s(t.isbn)])," ",_h("td",[_s(t.name)])," ",_h("td",[_s(t.publisher)])," ",_h("td",[_h("button",{staticClass:"btn btn-default btn-block btn-xs",on:{click:function(e){showBookDetail(t)}}},["detail"])])])})]):_h("tbody",[_h("tr",[_h("td",{attrs:{colspan:"4",style:"text-align: center"}},["empty."])])])," "])])," ",_h("div",{staticClass:"modal fade",attrs:{id:"modal-book-detail"}},[_h("div",{staticClass:"modal-dialog modal-lg"},[book?_h("div",{staticClass:"modal-content"},[_m(12)," ",_h("div",{staticClass:"modal-body"},[_h("div",{staticClass:"media"},[book.imageUrl?_h("div",{staticClass:"media-left"},[_h("img",{staticClass:"img-book",attrs:{src:book.imageUrl}})]):_e()," ",_h("div",{staticClass:"media-body"},[_h("table",{staticClass:"table table-bordered table-condensed table-hover"},[_h("tbody",[book.isbn?_h("tr",[_m(13)," ",_h("td",[_s(book.isbn)])]):_e()," ",book.name?_h("tr",[_m(14)," ",_h("td",[_s(book.name)])]):_e()," ",book.publisher?_h("tr",[_m(15)," ",_h("td",[_s(book.publisher)])]):_e()," ",book.authors&&book.authors.length?_h("tr",[_m(16)," ",_h("td",[_s(book.authors.join(", "))])]):_e()," ",book.desc?_h("tr",[_m(17)," ",_h("td",[_s(book.desc)])]):_e()," ",_h("tr",[_m(18)," ",_h("td",[_s(new Date(book.createTime).toLocaleDateString())])])])])])])])," ",_h("div",{staticClass:"modal-body"},[_h("form",{on:{submit:function(t){t.preventDefault(),addTrace(newTrace)}}},[_m(19)," ",_h("input",{directives:[{name:"model",value:newTrace.location,expression:"newTrace.location"}],staticClass:"form-control",attrs:{type:"text",id:"new-trace-location",required:""},domProps:{value:_s(newTrace.location)},on:{input:function(t){t.target.composing||(newTrace.location=t.target.value)}}})," ",_m(20)])," ",_m(21)," ",_h("table",{staticClass:"table table-bordered table-condensed table-hover"},[_m(22)," ",filteredTraces&&filteredTraces.length?_h("tbody",[_l(filteredTraces,function(t){return _h("tr",[_h("td",["No."+_s(t.id)+' on "'+_s(t.location)+'"'])," ",_h("td",[_h("img",{attrs:{src:"http://barcode.tec-it.com/barcode.ashx?data="+t.isbn+":"+t.id+"&code=Code128&dpi=96"}})])," ",_h("td",[_s(t.status)])," ",_h("td",[_s(new Date(t.createTime).toLocaleDateString())])," ",_h("td",[_h("button",{on:{click:function(e){deleteTrace(t)}}},["delete"])])])})]):_h("tbody",[_h("tr",[_h("td",{attrs:{colspan:"3",style:"text-align: center"}},["empty."])])])," "])])]):_e()])])])},staticRenderFns:[function(){with(this)return _h("h3",["Add Book"])},function(){with(this)return _h("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"submit"}},["fetch from Douban API"])},function(){with(this)return _h("br")},function(){with(this)return _h("label",{attrs:{"for":"new-isbn"}},["ISBN"])},function(){with(this)return _h("label",{attrs:{"for":"new-name"}},["name"])},function(){with(this)return _h("label",{attrs:{"for":"new-publisher"}},["publisher"])},function(){with(this)return _h("label",{attrs:{"for":"new-authors"}},["authors (each start with #)"])},function(){with(this)return _h("label",{attrs:{"for":"new-imageUrl"}},["image URL"])},function(){with(this)return _h("label",{attrs:{"for":"new-image"}},["image (if no URL above)"])},function(){with(this)return _h("label",{attrs:{"for":"new-desc"}},["description"])},function(){with(this)return _h("br")},function(){with(this)return _h("thead",[_h("tr",[_h("th",["ISBN"])," ",_h("th",["name"])," ",_h("th",["publisher"])," ",_h("th",["operation"])])])},function(){with(this)return _h("div",{staticClass:"modal-header"},[_h("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[_h("span",["×"])])," ",_h("h4",{staticClass:"modal-title"},["Detail"])])},function(){with(this)return _h("td",["ISBN"])},function(){with(this)return _h("td",["name"])},function(){with(this)return _h("td",["Publisher"])},function(){with(this)return _h("td",["Authors"])},function(){with(this)return _h("td",["Description"])},function(){with(this)return _h("td",["created at"])},function(){with(this)return _h("label",{attrs:{"for":"new-trace-location"}},["location"])},function(){with(this)return _h("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"submit"}},["add book trace"])},function(){with(this)return _h("br")},function(){with(this)return _h("thead",[_h("tr",[_h("th",["trace"])," ",_h("th",["barcode"])," ",_h("th",["status"])," ",_h("th",["created at"])," ",_h("th",["operation"])])])}]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"container"},[_h("div",{staticClass:"col-sm-12"},[_h("input",{directives:[{name:"model",value:searchInput,expression:"searchInput"}],staticClass:"input-search",attrs:{autofocus:"",autocomplete:"off",placeholder:"Search by username here"},domProps:{value:_s(searchInput)},on:{input:function(t){t.target.composing||(searchInput=t.target.value)}}})," ",_h("table",{staticClass:"table table-bordered table-condensed table-hover"},[_m(0)," ",filteredBorrows&&filteredBorrows.length?_h("tbody",[_l(filteredBorrows,function(t){return _h("tr",[_h("td",[_h("ul",[_h("li",["\n              "+_s(t.trace.book.name)+", "+_s(t.trace.book.publisher)+"\n              ",_m(1),"\n              by "+_s(t.trace.book.authors.join(", "))+"\n            "])," ",_h("li",["No."+_s(t.trace.id)+" on "+_s(t.trace.location)])])])," ",_h("td",["\n          "+_s(t.user.username)+"\n        "])," ",_h("td",["\n          "+_s(t.status)+"\n        "])," ",_h("td",[_h("ul",[t.applyingTime?_h("li",[_s(datetime("applied at",t.applyingTime))]):_e()," ",t.expiredTime?_h("li",[_s(datetime("expire at",t.expiredTime))]):_e()," ",t.activeTime?_h("li",[_s(datetime("active at",t.activeTime))]):_e()," ",t.appointedTime?_h("li",[_s(datetime("appointed until",t.appointedTime))]):_e()])])," ",_h("td",["APPLYING"===t.status?[_h("button",{staticClass:"btn btn-success btn-block btn-xs",on:{click:function(e){acceptApplication(t)}}},["accept"])," ",_h("button",{staticClass:"btn btn-danger btn-block btn-xs",on:{click:function(e){rejectApplication(t)}}},["reject"])]:_e()," ","ACTIVE"===t.status?[_h("button",{staticClass:"btn btn-success btn-block btn-xs",on:{click:function(e){confirmReturned(t)}}},["confirm returned"])," "]:_e()])])})]):_h("tbody",[_h("tr",[_h("td",{attrs:{colspan:"5",style:"text-align: center"}},["empty."])])])," "])])])},staticRenderFns:[function(){with(this)return _h("thead",[_h("tr",[_h("th",["No."])," ",_h("th",["username"])," ",_h("th",["status"])," ",_h("th",["info"])," ",_h("th",["operation"])])])},function(){with(this)return _h("br")}]}}]);
//# sourceMappingURL=app.7043cec543fc5f099197.js.map